# Frontend Onboarding

Это руководство по настройке клиентской части.

## Требования
- Node.js 16+

## Установка и запуск
1. Перейдите в каталог `frontend` и установите зависимости:
   ```bash
   npm install
   ```
   или используйте цель Makefile:
   ```bash
   make frontend-install
   ```
2. Запустите dev‑сервер:
   ```bash
   npm run dev
   ```
   После запуска фронтенд доступен на `http://localhost:3000`.

## Сборка
Для создания production‑версии выполните:
```bash
npm run build
```
Файлы будут помещены в `frontend/dist`.

### Просмотр production-сборки
Запустите локальный сервер, чтобы проверить итоговый билд:
```bash
npm run preview
```
Статичные файлы будут доступны на `http://localhost:4173`.

## Структура проекта
- `index.html` – разметка SPA и контейнеры для страниц (landing, dashboard и др.).
- `app.js` – логика работы с REST API и WebSocket, управление состоянием и хранением данных в `localStorage`.
- `style.css` – базовые стили; дополнительные файлы находятся в каталоге `styles/` (layout, components, utils).
- `vite.config.js` – конфигурация Vite. Используется прокси, перенаправляющий `/api` и `/ws` на backend.
- `chat_vars.txt` – примеры CSS‑переменных для цветов сообщений в чате.
Все статические ресурсы после сборки помещаются в `frontend/dist`.

### Настройка прокси
По умолчанию в `vite.config.js` указан адрес `http://192.168.64.1:8000` для
локального backend. Если API запущен на другом хосте, измените `target` в файле на нужный адрес.

## Взаимодействие с API
В файле `app.js` описан объект `API_ENDPOINTS`, содержащий маршруты авторизации,
работы с треками, генерацией планов и обменом сообщениями. Запросы выполняются
через функцию `apiRequest`, которая автоматически добавляет JWT‑токен из `localStorage`.

Для чатов используется WebSocket (`/ws/chat/{session_id}`). Адрес собирается
автоматически с учётом текущего протокола и хоста страницы.

## Полезные команды
- `npm run dev` или `make frontend-dev` – запуск dev‑сервера.
- `npm run build` – production‑сборка.
- `npm run preview` – проверка собранной версии.

Для быстрой проверки API имеется файл `test-frontend.html`, в котором можно
отправить запросы к AI без запуска основного SPA.

